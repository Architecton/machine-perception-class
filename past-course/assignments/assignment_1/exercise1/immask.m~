% function [R] = immask(I, M)

% Apply masking 
function [R] = immask(I, M)
	R = I(:,:,1);
	G = I(:,:,2);
	B = I(:,:,3);
	R(not(M)) = 0;
	G(not(M)) = 0;
	B(not(M)) = 0;
	R = cat(3, R, G, B);
	
	% Also:
	%  A(repmat(not(M), [1, 1, 3])) = 0
	%
	%  This replicates the masking M matrix three times into the third dimension.
	